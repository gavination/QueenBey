!function t(e,n,r){function i(s,u){if(!n[s]){if(!e[s]){var a="function"==typeof require&&require;if(!u&&a)return a(s,!0);if(o)return o(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var l=n[s]={exports:{}};e[s][0].call(l.exports,function(t){var n=e[s][1][t];return i(n?n:t)},l,l.exports,t,e,n,r)}return n[s].exports}for(var o="function"==typeof require&&require,s=0;s<r.length;s++)i(r[s]);return i}({1:[function(t,e,n){"use strict";function r(t){return Array.isArray(t)?o.call(this,t):i.call(this,t)}var i=t("./helpers/add-one"),o=t("./helpers/add-many");e.exports=r},{"./helpers/add-many":5,"./helpers/add-one":6}],2:[function(t,e,n){"use strict";function r(t){var e=this;return e.destroy().then(function(){t.emitter.emit("clear")})}e.exports=r},{}],3:[function(t,e,n){"use strict";function r(t){return this.allDocs({include_docs:!0}).then(function(e){var n=e.rows.filter(o).map(function(t){return i(t.doc)});return"function"==typeof t?n.filter(t):n})}var i=t("./utils/to-object"),o=t("./utils/isnt-design-doc");e.exports=r},{"./utils/isnt-design-doc":34,"./utils/to-object":39}],4:[function(t,e,n){"use strict";function r(t){return Array.isArray(t)?o.call(this,t):i.call(this,t)}var i=t("./helpers/find-one"),o=t("./helpers/find-many");e.exports=r},{"./helpers/find-many":8,"./helpers/find-one":9}],5:[function(t,e,n){"use strict";var r=t("../utils/to-doc"),i=t("../utils/add-timestamps");e.exports=function(t){return t.forEach(i),this.bulkDocs(t.map(r)).then(function(e){return e.map(function(e,n){if(e instanceof Error){if(409===e.status){var r=new Error('Object with id "'+t[n].id+'" already exists');return r.name="Conflict",r.status=409,r}return e}return t[n].id=e.id,t[n]._rev=e.rev,t[n]})})}},{"../utils/add-timestamps":32,"../utils/to-doc":37}],6:[function(t,e,n){"use strict";var r=t("pouchdb-errors"),i=t("lie"),o=t("../utils/to-doc"),s=t("../utils/add-timestamps");e.exports=function(t){if("object"!=typeof t)return i.reject(r.NOT_AN_OBJECT);var e=t.id?"put":"post";return this[e](o(s(t))).then(function(e){return t.id=e.id,t._rev=e.rev,t}).catch(function(e){if(409===e.status){var n=new Error('Object with id "'+t.id+'" already exists');throw n.name="Conflict",n.status=409,n}throw e})}},{"../utils/add-timestamps":32,"../utils/to-doc":37,lie:22,"pouchdb-errors":24}],7:[function(t,e,n){function r(t,e,n,r){return function(){return n.apply(t,arguments).then(function(t){return Array.isArray(t)?t.forEach(i.bind(null,e,r)):i(e,r,t),t})}}function i(t,e,n){e||(e=parseInt(n._rev,10)>1?"update":"add"),t.emitter.emit(e,n),t.emitter.emit("change",e,n)}e.exports=r},{}],8:[function(t,e,n){"use strict";var r=t("../utils/to-id"),i=t("../utils/to-object");e.exports=function(t){var e=t.map(r);return this.allDocs({keys:e,include_docs:!0}).then(function(t){var n=t.rows.reduce(function(t,e){return t[e.id]=e.doc,t},{}),r=e.map(function(t){var e=n[t];if(e)return e;var r=new Error('Object with id "'+t+'" is missing');return r.name="Not found",r.status=404,r});return r.map(i)})}},{"../utils/to-id":38,"../utils/to-object":39}],9:[function(t,e,n){"use strict";var r=t("../utils/to-id"),i=t("../utils/to-object");e.exports=function(t){var e=r(t);return this.get(e).then(i).catch(function(t){if(404===t.status){var n=new Error('Object with id "'+e+'" is missing');throw n.name="Not found",n.status=404,n}throw t})}},{"../utils/to-id":38,"../utils/to-object":39}],10:[function(t,e,n){var r=t("../utils/to-id"),i=t("./find-many"),o=t("./add-many"),s=t("./eventify");e.exports=function(t,e){var n,u=this,a=e.map(r);return i.call(this,a).then(function(i){n=i;var a=n.map(r),c=e.reduce(function(t,e){return a.indexOf(e.id)===-1&&t.push(e),t},[]);return t?s(u,t,o)(c):o.call(u,c)}).then(function(t){var e=[];return n.concat(t).forEach(function(t){var n=a.indexOf(t.id);e[n]=t}),e})}},{"../utils/to-id":38,"./add-many":5,"./eventify":7,"./find-many":8}],11:[function(t,e,n){function r(t,e,n){var r=this,l=s(e);return l&&(e!==l||n)?u.call(this,l).catch(function(){return"object"==typeof n?n.id=l:n=e,t?c(r,t,a)(n):a.call(r,n)}):o.reject(i.MISSING_ID)}e.exports=r;var i=t("pouchdb-errors"),o=t("lie"),s=t("../utils/to-id"),u=t("./find-one"),a=t("./add-one"),c=t("./eventify")},{"../utils/to-id":38,"./add-one":6,"./eventify":7,"./find-one":9,lie:22,"pouchdb-errors":24}],12:[function(t,e,n){"use strict";var r=t("pouchdb-extend"),i=t("pouchdb-errors"),o=t("../utils/change-object"),s=t("../utils/to-doc"),u=t("../utils/add-timestamps"),a=t("../utils/to-id"),c=t("./find-many");e.exports=function(t,e){var n,l=this,d=t.map(a);return c.call(this,t).then(function(n){return e?n.map(function(t){return t instanceof Error?t:o(e,t)}):n.map(function(e,n){var o=t[n];return e instanceof Error?e:"object"!=typeof o?i.NOT_AN_OBJECT:r(e,o)})}).then(function(t){n=t;var e=n.filter(function(t){return!(t instanceof Error)});return e.forEach(u),l.bulkDocs(e.map(s))}).then(function(t){return t.forEach(function(t){var e=d.indexOf(t.id);n[e]._rev=t.rev}),n})}},{"../utils/add-timestamps":32,"../utils/change-object":33,"../utils/to-doc":37,"../utils/to-id":38,"./find-many":8,"pouchdb-errors":24,"pouchdb-extend":26}],13:[function(t,e,n){"use strict";var r=t("pouchdb-extend"),i=t("pouchdb-errors"),o=t("lie"),s=t("../utils/change-object"),u=t("../utils/to-doc"),a=t("../utils/add-timestamps"),c=t("./find-one");e.exports=function(t,e){var n,l=this;return"string"!=typeof t||e?c.call(this,t).then(function(n){return e?s(e,n):r(n,t)}).then(function(t){return n=t,l.put(u(a(n)))}).then(function(t){return n._rev=t.rev,n}):o.reject(i.NOT_AN_OBJECT)}},{"../utils/add-timestamps":32,"../utils/change-object":33,"../utils/to-doc":37,"./find-one":9,lie:22,"pouchdb-errors":24,"pouchdb-extend":26}],14:[function(t,e,n){var r=t("../utils/to-id"),i=t("./add-many"),o=t("./update-many");e.exports=function(t){var e,n=this,s=t.map(r);return i.call(this,t).then(function(r){e=r;var i=t.reduce(function(t,e,n){var i=r[n],o=i instanceof Error&&409===i.status;return o&&t.push(e),t},[]);return o.call(n,i)}).then(function(t){var n=[];return t.concat(e).forEach(function(t){var e=s.indexOf(t.id);e!==-1&&(n[e]=t)}),n})}},{"../utils/to-id":38,"./add-many":5,"./update-many":12}],15:[function(t,e,n){var r=t("../utils/to-id"),i=t("./add-one"),o=t("./update-one");e.exports=function(t,e){var n=this;return o.call(this,t,e).catch(function(o){if(404!==o.status)throw o;return e?(e.id=r(t),i.call(n,e)):i.call(n,t)})}},{"../utils/to-id":38,"./add-one":6,"./update-one":13}],16:[function(t,e,n){"use strict";function r(e){var n={emitter:e&&e.emitter||new i};return{db:this,add:o(this,n,t("./add")),find:t("./find").bind(this),findAll:t("./find-all").bind(this),findOrAdd:t("./lib/find-or-add-with-events").bind(this,n),update:o(this,n,t("./update")),updateOrAdd:o(this,n,t("./update-or-add")),updateAll:o(this,n,t("./update-all")),remove:o(this,n,t("./remove"),"remove"),removeAll:o(this,n,t("./remove-all"),"remove"),on:t("./lib/on").bind(this,n),one:t("./lib/one").bind(this,n),off:t("./lib/off").bind(this,n),clear:t("./clear").bind(this,n)}}var n=e.exports={hoodieApi:r},i=t("events").EventEmitter,o=t("./helpers/eventify");"undefined"!=typeof window&&window.PouchDB&&window.PouchDB.plugin(n)},{"./add":1,"./clear":2,"./find":4,"./find-all":3,"./helpers/eventify":7,"./lib/find-or-add-with-events":17,"./lib/off":18,"./lib/on":19,"./lib/one":20,"./remove":28,"./remove-all":27,"./update":31,"./update-all":29,"./update-or-add":30,events:21}],17:[function(t,e,n){"use strict";function r(t,e,n){return Array.isArray(e)?o.call(this,t,e):i.call(this,t,e,n)}var i=t("../helpers/find-or-add-one"),o=t("../helpers/find-or-add-many");e.exports=r},{"../helpers/find-or-add-many":10,"../helpers/find-or-add-one":11}],18:[function(t,e,n){"use strict";function r(t,e,n){return t.emitter.removeListener(e,n),this}e.exports=r},{}],19:[function(t,e,n){"use strict";function r(t,e,n){return t.emitter.on(e,n),this}e.exports=r},{}],20:[function(t,e,n){"use strict";function r(t,e,n){return t.emitter.once(e,n),this}e.exports=r},{}],21:[function(t,e,n){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function i(t){return"function"==typeof t}function o(t){return"number"==typeof t}function s(t){return"object"==typeof t&&null!==t}function u(t){return void 0===t}e.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(t){if(!o(t)||t<0||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},r.prototype.emit=function(t){var e,n,r,o,a,c;if(this._events||(this._events={}),"error"===t&&(!this._events.error||s(this._events.error)&&!this._events.error.length)){if(e=arguments[1],e instanceof Error)throw e;var l=new Error('Uncaught, unspecified "error" event. ('+e+")");throw l.context=e,l}if(n=this._events[t],u(n))return!1;if(i(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:o=Array.prototype.slice.call(arguments,1),n.apply(this,o)}else if(s(n))for(o=Array.prototype.slice.call(arguments,1),c=n.slice(),r=c.length,a=0;a<r;a++)c[a].apply(this,o);return!0},r.prototype.addListener=function(t,e){var n;if(!i(e))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,i(e.listener)?e.listener:e),this._events[t]?s(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,s(this._events[t])&&!this._events[t].warned&&(n=u(this._maxListeners)?r.defaultMaxListeners:this._maxListeners,n&&n>0&&this._events[t].length>n&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace())),this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(t,e){function n(){this.removeListener(t,n),r||(r=!0,e.apply(this,arguments))}if(!i(e))throw TypeError("listener must be a function");var r=!1;return n.listener=e,this.on(t,n),this},r.prototype.removeListener=function(t,e){var n,r,o,u;if(!i(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(n=this._events[t],o=n.length,r=-1,n===e||i(n.listener)&&n.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(s(n)){for(u=o;u-- >0;)if(n[u]===e||n[u].listener&&n[u].listener===e){r=u;break}if(r<0)return this;1===n.length?(n.length=0,delete this._events[t]):n.splice(r,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},r.prototype.removeAllListeners=function(t){var e,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[t],i(n))this.removeListener(t,n);else if(n)for(;n.length;)this.removeListener(t,n[n.length-1]);return delete this._events[t],this},r.prototype.listeners=function(t){var e;return e=this._events&&this._events[t]?i(this._events[t])?[this._events[t]]:this._events[t].slice():[]},r.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(i(e))return 1;if(e)return e.length}return 0},r.listenerCount=function(t,e){return t.listenerCount(e)}},{}],22:[function(t,e,n){"use strict";function r(){}function i(t){if("function"!=typeof t)throw new TypeError("resolver must be a function");this.state=b,this.queue=[],this.outcome=void 0,t!==r&&a(this,t)}function o(t,e,n){this.promise=t,"function"==typeof e&&(this.onFulfilled=e,this.callFulfilled=this.otherCallFulfilled),"function"==typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}function s(t,e,n){p(function(){var r;try{r=e(n)}catch(e){return v.reject(t,e)}r===t?v.reject(t,new TypeError("Cannot resolve promise with itself")):v.resolve(t,r)})}function u(t){var e=t&&t.then;if(t&&"object"==typeof t&&"function"==typeof e)return function(){e.apply(t,arguments)}}function a(t,e){function n(e){o||(o=!0,v.reject(t,e))}function r(e){o||(o=!0,v.resolve(t,e))}function i(){e(r,n)}var o=!1,s=c(i);"error"===s.status&&n(s.value)}function c(t,e){var n={};try{n.value=t(e),n.status="success"}catch(t){n.status="error",n.value=t}return n}function l(t){return t instanceof this?t:v.resolve(new this(r),t)}function d(t){var e=new this(r);return v.reject(e,t)}function f(t){function e(t,e){function r(t){s[e]=t,++u!==i||o||(o=!0,v.resolve(c,s))}n.resolve(t).then(r,function(t){o||(o=!0,v.reject(c,t))})}var n=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var i=t.length,o=!1;if(!i)return this.resolve([]);for(var s=new Array(i),u=0,a=-1,c=new this(r);++a<i;)e(t[a],a);return c}function h(t){function e(t){n.resolve(t).then(function(t){o||(o=!0,v.resolve(u,t))},function(t){o||(o=!0,v.reject(u,t))})}var n=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var i=t.length,o=!1;if(!i)return this.resolve([]);for(var s=-1,u=new this(r);++s<i;)e(t[s]);return u}var p=t("immediate"),v={},m=["REJECTED"],y=["FULFILLED"],b=["PENDING"];e.exports=i,i.prototype.catch=function(t){return this.then(null,t)},i.prototype.then=function(t,e){if("function"!=typeof t&&this.state===y||"function"!=typeof e&&this.state===m)return this;var n=new this.constructor(r);if(this.state!==b){var i=this.state===y?t:e;s(n,i,this.outcome)}else this.queue.push(new o(n,t,e));return n},o.prototype.callFulfilled=function(t){v.resolve(this.promise,t)},o.prototype.otherCallFulfilled=function(t){s(this.promise,this.onFulfilled,t)},o.prototype.callRejected=function(t){v.reject(this.promise,t)},o.prototype.otherCallRejected=function(t){s(this.promise,this.onRejected,t)},v.resolve=function(t,e){var n=c(u,e);if("error"===n.status)return v.reject(t,n.value);var r=n.value;if(r)a(t,r);else{t.state=y,t.outcome=e;for(var i=-1,o=t.queue.length;++i<o;)t.queue[i].callFulfilled(e)}return t},v.reject=function(t,e){t.state=m,t.outcome=e;for(var n=-1,r=t.queue.length;++n<r;)t.queue[n].callRejected(e);return t},i.resolve=l,i.reject=d,i.all=f,i.race=h},{immediate:23}],23:[function(t,e,n){(function(t){"use strict";function n(){l=!0;for(var t,e,n=d.length;n;){for(e=d,d=[],t=-1;++t<n;)e[t]();n=d.length}l=!1}function r(t){1!==d.push(t)||l||i()}var i,o=t.MutationObserver||t.WebKitMutationObserver;if(o){var s=0,u=new o(n),a=t.document.createTextNode("");u.observe(a,{characterData:!0}),i=function(){a.data=s=++s%2}}else if(t.setImmediate||"undefined"==typeof t.MessageChannel)i="document"in t&&"onreadystatechange"in t.document.createElement("script")?function(){var e=t.document.createElement("script");e.onreadystatechange=function(){n(),e.onreadystatechange=null,e.parentNode.removeChild(e),e=null},t.document.documentElement.appendChild(e)}:function(){setTimeout(n,0)};else{var c=new t.MessageChannel;c.port1.onmessage=n,i=function(){c.port2.postMessage(0)}}var l,d=[];e.exports=r}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],24:[function(t,e,n){"use strict";function r(t){return t&&"object"==typeof t&&"default"in t?t.default:t}function i(t){Error.call(this,t.reason),this.status=t.status,this.name=t.error,this.message=t.reason,this.error=!0}function o(t,e){function n(e){for(var n in t)"function"!=typeof t[n]&&(this[n]=t[n]);void 0!==e&&(this.reason=e)}return n.prototype=i.prototype,new n(e)}function s(t){if("object"!=typeof t){var e=t;t=m,t.data=e}return"error"in t&&"conflict"===t.error&&(t.name="conflict",t.status=409),"name"in t||(t.name=t.error||"unknown"),"status"in t||(t.status=500),"message"in t||(t.message=t.message||t.reason),t}Object.defineProperty(n,"__esModule",{value:!0});var u=r(t("inherits"));u(i,Error),i.prototype.toString=function(){return JSON.stringify({status:this.status,name:this.name,message:this.message,reason:this.reason})};var a=new i({status:401,error:"unauthorized",reason:"Name or password is incorrect."}),c=new i({status:400,error:"bad_request",reason:"Missing JSON list of 'docs'"}),l=new i({status:404,error:"not_found",reason:"missing"}),d=new i({status:409,error:"conflict",reason:"Document update conflict"}),f=new i({status:400,error:"bad_request",reason:"_id field must contain a string"}),h=new i({status:412,error:"missing_id",reason:"_id is required for puts"}),p=new i({status:400,error:"bad_request",reason:"Only reserved document ids may start with underscore."}),v=new i({status:412,error:"precondition_failed",reason:"Database not open"}),m=new i({status:500,error:"unknown_error",reason:"Database encountered an unknown error"}),y=new i({status:500,error:"badarg",reason:"Some query argument is invalid"}),b=new i({status:400,error:"invalid_request",reason:"Request was invalid"}),_=new i({status:400,error:"query_parse_error",reason:"Some query parameter is invalid"}),w=new i({status:500,error:"doc_validation",reason:"Bad special document member"}),g=new i({status:400,error:"bad_request",reason:"Something wrong with the request"}),x=new i({status:400,error:"bad_request",reason:"Document must be a JSON object"}),E=new i({status:404,error:"not_found",reason:"Database not found"}),j=new i({status:500,error:"indexed_db_went_bad",reason:"unknown"}),A=new i({status:500,error:"web_sql_went_bad",reason:"unknown"}),O=new i({status:500,error:"levelDB_went_went_bad",reason:"unknown"}),D=new i({status:403,error:"forbidden",reason:"Forbidden by design doc validate_doc_update function"}),L=new i({status:400,error:"bad_request",reason:"Invalid rev format"}),N=new i({status:412,error:"file_exists",reason:"The database could not be created, the file already exists."}),R=new i({status:412,error:"missing_stub"}),I=new i({status:413,error:"invalid_url",reason:"Provided URL is invalid"});n.UNAUTHORIZED=a,n.MISSING_BULK_DOCS=c,n.MISSING_DOC=l,n.REV_CONFLICT=d,n.INVALID_ID=f,n.MISSING_ID=h,n.RESERVED_ID=p,n.NOT_OPEN=v,n.UNKNOWN_ERROR=m,n.BAD_ARG=y,n.INVALID_REQUEST=b,n.QUERY_PARSE_ERROR=_,n.DOC_VALIDATION=w,n.BAD_REQUEST=g,n.NOT_AN_OBJECT=x,n.DB_MISSING=E,n.WSQ_ERROR=A,n.LDB_ERROR=O,n.FORBIDDEN=D,n.INVALID_REV=L,n.FILE_EXISTS=N,n.MISSING_STUB=R,n.IDB_ERROR=j,n.INVALID_URL=I,n.createError=o,n.generateErrorFromResponse=s},{inherits:25}],25:[function(t,e,n){"function"==typeof Object.create?e.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},{}],26:[function(t,e,n){"use strict";function r(t){return null===t?String(t):"object"==typeof t||"function"==typeof t?c[h.call(t)]||"object":typeof t}function i(t){return null!==t&&t===t.window}function o(t){if(!t||"object"!==r(t)||t.nodeType||i(t))return!1;try{if(t.constructor&&!p.call(t,"constructor")&&!p.call(t.constructor.prototype,"isPrototypeOf"))return!1}catch(t){return!1}var e;for(e in t);return void 0===e||p.call(t,e)}function s(t){return"function"===r(t)}function u(){for(var t=[],e=-1,n=arguments.length,r=new Array(n);++e<n;)r[e]=arguments[e];var i={};t.push({args:r,result:{container:i,key:"key"}});for(var o;o=t.pop();)a(t,o.args,o.result);return i.key}function a(t,e,n){var r,i,u,a,c,l,d,f=e[0]||{},h=1,p=e.length,m=!1,y=/\d+/;for("boolean"==typeof f&&(m=f,f=e[1]||{},h=2),"object"==typeof f||s(f)||(f={}),p===h&&(f=this,--h);h<p;h++)if(null!=(r=e[h])){d=v(r);for(i in r)if(!(i in Object.prototype)){if(d&&!y.test(i))continue;if(u=f[i],a=r[i],f===a)continue;m&&a&&(o(a)||(c=v(a)))?(c?(c=!1,l=u&&v(u)?u:[]):l=u&&o(u)?u:{},t.push({args:[m,l,a],result:{container:f,key:i}})):void 0!==a&&(v(r)&&s(a)||(f[i]=a))}}n.container[n.key]=f}for(var c={},l=["Boolean","Number","String","Function","Array","Date","RegExp","Object","Error"],d=0;d<l.length;d++){var f=l[d];c["[object "+f+"]"]=f.toLowerCase()}var h=c.toString,p=c.hasOwnProperty,v=Array.isArray||function(t){return"array"===r(t)};e.exports=u},{}],27:[function(t,e,n){"use strict";function r(t){var e;return this.allDocs({include_docs:!0}).then(function(n){return e=n.rows.filter(s).map(function(t){return i(t.doc)}),"function"==typeof t&&(e=e.filter(t)),e.map(function(t){return t._deleted=!0,o(u(t))})}).then(this.bulkDocs.bind(this)).then(function(t){return t.map(function(t,n){return e[n]._rev=t.rev,e[n]})})}var i=t("./utils/to-object"),o=t("./utils/to-doc"),s=t("./utils/isnt-design-doc"),u=t("./utils/add-timestamps");e.exports=r},{"./utils/add-timestamps":32,"./utils/isnt-design-doc":34,"./utils/to-doc":37,"./utils/to-object":39}],28:[function(t,e,n){"use strict";function r(t,e){return Array.isArray(t)?s.call(this,t.map(i.bind(null,e))):o.call(this,i(e,t))}var i=t("./utils/mark-as-deleted"),o=t("./helpers/update-one"),s=t("./helpers/update-many");e.exports=r},{"./helpers/update-many":12,"./helpers/update-one":13,"./utils/mark-as-deleted":35}],29:[function(t,e,n){function r(t){var e,n=typeof t;return"object"!==n&&"function"!==n?o.reject(new Error("Must provide object or function")):this.allDocs({include_docs:!0}).then(function(r){return e=r.rows.filter(c).map(function(t){return s(t.doc)}),e.forEach(a),"function"===n?(e.forEach(t),e.map(u)):e.map(function(e){return i(e,t),u(e)})}).then(function(t){return t}).then(this.bulkDocs.bind(this)).then(function(t){return t.map(function(t,n){return e[n]._rev=t.rev,e[n]})})}e.exports=r;var i=t("pouchdb-extend"),o=t("lie"),s=t("./utils/to-object"),u=t("./utils/to-doc"),a=t("./utils/add-timestamps"),c=t("./utils/isnt-design-doc")},{"./utils/add-timestamps":32,"./utils/isnt-design-doc":34,"./utils/to-doc":37,"./utils/to-object":39,lie:22,"pouchdb-extend":26}],30:[function(t,e,n){"use strict";function r(t,e){return Array.isArray(t)?o.call(this,t):i.call(this,t,e)}var i=t("./helpers/update-or-add-one"),o=t("./helpers/update-or-add-many");e.exports=r},{"./helpers/update-or-add-many":14,"./helpers/update-or-add-one":15}],31:[function(t,e,n){function r(t,e){return"object"==typeof t||e?Array.isArray(t)?s.call(this,t,e):o.call(this,t,e):i.reject(new Error("Must provide change"))}e.exports=r;var i=t("lie"),o=t("./helpers/update-one"),s=t("./helpers/update-many")},{"./helpers/update-many":12,"./helpers/update-one":13,lie:22}],32:[function(t,e,n){"use strict";var r=t("./now");e.exports=function(t){return t.updatedAt=r(),t.createdAt=t.createdAt||t.updatedAt,t._deleted&&(t.deletedAt=t.deletedAt||t.updatedAt),t}},{"./now":36}],33:[function(t,e,n){"use strict";var r=t("pouchdb-extend");e.exports=function(t,e){return"object"==typeof t?r(e,t):(t(e),e)}},{"pouchdb-extend":26}],34:[function(t,e,n){"use strict";e.exports=function(t){return null===t.id.match(/^_design/)}},{}],35:[function(t,e,n){"use strict";var r=t("pouchdb-extend"),i=t("./change-object");e.exports=function(t,e){var n="string"==typeof e?{id:e}:e;return t&&i(t,n),r({_deleted:!0},n)}},{"./change-object":33,"pouchdb-extend":26}],36:[function(t,e,n){e.exports=function(){return(new Date).toISOString()}},{}],37:[function(t,e,n){"use strict";var r=t("pouchdb-extend");e.exports=function(t){var e=r({},t,{_id:t.id});return delete e.id,e}},{"pouchdb-extend":26}],38:[function(t,e,n){"use strict";e.exports=function(t){return"object"==typeof t?t.id:t}},{}],39:[function(t,e,n){"use strict";var r=t("pouchdb-extend");e.exports=function(t){if(t instanceof Error)return t;var e=r({},t,{id:t._id});return delete e._id,e}},{"pouchdb-extend":26}]},{},[16]);
